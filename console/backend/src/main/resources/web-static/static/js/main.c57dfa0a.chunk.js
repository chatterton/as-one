(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{149:function(e){e.exports=[{x:30,y:5},{x:29,y:5},{x:28,y:5},{x:27,y:5},{x:27,y:6},{x:27,y:7},{x:27,y:8},{x:28,y:8},{x:29,y:8},{x:30,y:8},{x:30,y:7},{x:30,y:6},{x:30,y:4},{x:30,y:3},{x:30,y:2},{x:29,y:2},{x:28,y:2},{x:27,y:2},{x:27,y:3},{x:27,y:4},{x:25,y:5},{x:24,y:5},{x:23,y:5},{x:22,y:5},{x:22,y:6},{x:22,y:7},{x:22,y:8},{x:23,y:8},{x:24,y:8},{x:25,y:8},{x:25,y:7},{x:25,y:6},{x:25,y:4},{x:25,y:3},{x:25,y:2},{x:24,y:2},{x:23,y:2},{x:22,y:2},{x:22,y:3},{x:22,y:4},{x:20,y:2},{x:20,y:3},{x:20,y:4},{x:20,y:5},{x:20,y:6},{x:20,y:7},{x:20,y:8},{x:17,y:9},{x:16,y:9},{x:15,y:9},{x:14,y:9},{x:13,y:9},{x:13,y:8},{x:14,y:8},{x:15,y:8},{x:16,y:8},{x:17,y:8},{x:17,y:7},{x:16,y:7},{x:15,y:7},{x:14,y:7},{x:13,y:7},{x:18,y:2},{x:17,y:2},{x:16,y:2},{x:16,y:3},{x:16,y:4},{x:17,y:4},{x:18,y:4},{x:18,y:3},{x:18,y:1},{x:18,y:0},{x:17,y:0},{x:16,y:0},{x:16,y:1},{x:14,y:2},{x:13,y:2},{x:12,y:2},{x:12,y:3},{x:12,y:4},{x:13,y:4},{x:14,y:4},{x:14,y:3},{x:14,y:1},{x:14,y:0},{x:13,y:0},{x:12,y:0},{x:12,y:1},{x:10,y:5},{x:9,y:5},{x:8,y:5},{x:7,y:5},{x:7,y:6},{x:7,y:7},{x:7,y:8},{x:8,y:8},{x:9,y:8},{x:10,y:8},{x:10,y:7},{x:10,y:6},{x:10,y:4},{x:10,y:3},{x:10,y:2},{x:9,y:2},{x:8,y:2},{x:7,y:2},{x:7,y:3},{x:7,y:4},{x:5,y:5},{x:4,y:5},{x:3,y:5},{x:2,y:5},{x:2,y:6},{x:2,y:7},{x:2,y:8},{x:3,y:8},{x:4,y:8},{x:5,y:8},{x:5,y:7},{x:5,y:6},{x:5,y:4},{x:5,y:3},{x:5,y:2},{x:4,y:2},{x:3,y:2},{x:2,y:2},{x:2,y:3},{x:2,y:4},{x:0,y:2},{x:0,y:3},{x:0,y:4},{x:0,y:5},{x:0,y:6},{x:0,y:7},{x:0,y:8}]},232:function(e,t,a){e.exports=a(502)},236:function(e,t,a){},358:function(e,t){},360:function(e,t){},433:function(e,t){},434:function(e,t){},441:function(e,t,a){},501:function(e,t,a){},502:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(52),s=a.n(c),o=(a(236),a(10)),l=(a(237),a(20)),i=a.n(l),u=a(27),y=a(74),x=a(75),m=a.n(x),f={error:function(e){console.error(e)},log:function(e){console.log(e)}};var d=200;function p(){var e=Object(n.useState)(d),t=Object(o.a)(e,2),a=t[0],r=t[1],c=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],r=t[1];return[a,Object(n.useCallback)(function(e){function t(){null!==e&&r(e.getBoundingClientRect())}return window.addEventListener("resize",t),t(),function(){window.removeEventListener("resize",t)}},[])]}(),s=Object(o.a)(c,2),l=s[0],i=s[1];return Object(n.useEffect)(function(){var e=d;l&&(e=l.width),r(e)},[l,a]),[i,a,r]}var b=a(76),E=a(25),h=a(53),v=a.n(h),O=a(230),j=a.n(O);function g(e){var t=e.address,a=e.name,c=Object(n.useState)((new Date).valueOf()),s=Object(o.a)(c,2),l=s[0],x=s[1],m=Object(n.useState)(new j.a(300)),d=Object(o.a)(m,2),h=d[0],O=d[1],g=p(),w=Object(o.a)(g,2),k=w[0],S=w[1],_=Object(n.useState)(!1),N=Object(o.a)(_,2),P=N[0],C=N[1],B=Object(n.useState)(""),L=Object(o.a)(B,2),M=L[0],U=L[1],I=Object(n.useRef)([]).current;Object(y.a)(function(){O(function(e){return I.map(function(t){return e.push(t)}),e}),x((new Date).valueOf()),I.length=0},100),Object(n.useEffect)(function(){function e(){return(e=Object(u.a)(i.a.mark(function e(){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.a.connect(t),e.prev=1,e.next=4,n.subscribe("asOne/sensor/reading");case 4:f.log("subscribed sensormonitor"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),f.error("error connecting to mqtt"),f.error(e.t0);case 11:return n.on("message",function(e,t){if(null!=t){var n=t.toString();if(n.startsWith(a)){var r=n.split(","),c=[parseInt(r[5]),r[1],r[2],r[3],r[4]];I.push(c),U(r[6])}}}),e.abrupt("return",function(){n.close&&n.close()});case 13:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}P||(!function(){e.apply(this,arguments)}(),C(!0))},[P,t,I,a,U]);var R=h.toArray(),q=R.length<2?1:R.map(function(e){return parseInt(e[1])+parseInt(e[2])+parseInt(e[3])+parseInt(e[4])}).reduce(function(e,t){return e+t}),A=R.length<2?1:q/R.length/4,T=new E.TimeSeries({name:"readings",columns:["time","s1","s2","s3","s4"],points:R}),D=new E.TimeRange(l-5e3,l);return r.a.createElement("div",{ref:k},null==T?"Loading ...":r.a.createElement(b.ChartContainer,{width:S,timeRange:D,title:M+": "+e.name},r.a.createElement(b.ChartRow,{height:S/3,showGrid:!0},r.a.createElement(b.YAxis,{id:"axis1",min:A-100,max:A+100,width:28,type:"linear",format:".0f"}),r.a.createElement(b.Charts,null,r.a.createElement(b.LineChart,{axis:"axis1",series:T,columns:["s1","s2","s3","s4"],style:{s1:{stroke:"#ff0000",opacity:.75},s2:{stroke:"#bbffbb",opacity:.75},s3:{stroke:"#00bbff",opacity:.75},s4:{stroke:"#bbbbbb",opacity:.75}}})))))}var w=a(34),k=a.n(w),S=a(13),_=a.n(S),N="/sensors";function P(e){var t=e.address,a=Object(n.useState)([]),c=Object(o.a)(a,2),s=c[0],l=c[1];function x(){return(x=Object(u.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get(N);case 3:t=e.sent,l(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),f.error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}return Object(y.a)(function(){!function(){x.apply(this,arguments)}()},1e3),r.a.createElement(k.a,null,Object.keys(s).map(function(e){return r.a.createElement(_.a,{lg:6,md:!0,key:e},r.a.createElement(g,{name:e,address:t}))}))}var C=a(65),B=a.n(C),L="/game/flipSensors";function M(){function e(){return(e=Object(u.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post(L);case 3:t=e.sent,f.log("flipped sensor: "+t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),f.error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}return r.a.createElement(k.a,null,r.a.createElement(_.a,{md:5,sm:0}),r.a.createElement(_.a,{sm:2},r.a.createElement(B.a,{className:"btn-block",style:{whiteSpace:"nowrap"},onPointerUp:function(){!function(){e.apply(this,arguments)}()}},"\u2196\ufe0f FLIP \u2197\ufe0f")),r.a.createElement(_.a,{md:5,sm:0}))}a(441);function U(e){var t=e.address,a=e.topic,c=e.emoji,s=Object(n.useState)(!1),l=Object(o.a)(s,2),x=l[0],m=l[1],d=Object(n.useState)(!1),p=Object(o.a)(d,2),b=p[0],E=p[1];return Object(n.useEffect)(function(){function e(){return(e=Object(u.a)(i.a.mark(function e(){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.a.connect(t),e.prev=1,e.next=4,n.subscribe(a);case 4:f.log("subscribed mqttindicator "+c+" to topic "+a),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),f.error("error connecting to mqtt"),f.error(e.t0);case 11:n.on("message",function(){m(!0)});case 12:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}b||(!function(){e.apply(this,arguments)}(),E(!0))},[t,b,a,c]),Object(y.a)(function(){m(!1)},100),r.a.createElement("div",{className:x?"indicator-blink":"indicator"},r.a.createElement("span",{role:"img","aria-label":"MQTT"},c))}function I(e){var t=e.address,a=Object(n.useState)(!1),c=Object(o.a)(a,2),s=c[0],l=c[1],y=Object(n.useState)(null),x=Object(o.a)(y,2),m=x[0],d=x[1],p=Object(n.useState)("169"),b=Object(o.a)(p,2),E=b[0],h=b[1];function O(e,t){var a=m;a&&a.publish&&a.publish(e,t)}return Object(n.useEffect)(function(){function e(){return(e=Object(u.a)(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.a.connect(t),e.prev=1,e.next=4,a.subscribe("asOne/console/leftBPM");case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),f.error("error connecting to mqtt"),f.error(e.t0);case 10:a.on("message",function(e,t){if(null!=t){var a=t.toString();a&&h(a)}}),d(a);case 12:case"end":return e.stop()}},e,null,[[1,6]])}))).apply(this,arguments)}s||(!function(){e.apply(this,arguments)}(),l(!0))},[t,m,s,h]),r.a.createElement(k.a,null,r.a.createElement(_.a,null,r.a.createElement(B.a,{label:"Upper",id:"upper-button",onPointerDown:function(){},onPointerUp:function(){O("asOne/fe/testUpper","500")}},"Upper ______")),r.a.createElement(_.a,null,r.a.createElement(B.a,{label:"Lower",id:"lower-button",onPointerUp:function(){O("asOne/fe/testLower","375")}},"Lower ______")),r.a.createElement(_.a,null,r.a.createElement(B.a,{label:"80 BPM",id:"80-bpm-button",onPointerUp:function(){O("asOne/fe/doBPM","80")}},"80 BPM ______")),r.a.createElement(_.a,null,r.a.createElement(B.a,{label:"Left BPM",id:"left-bpm-button",onPointerUp:function(){O("asOne/fe/doBPM",E)}},"Left BPM (",E,")")),r.a.createElement(_.a,null),r.a.createElement(_.a,null))}var R=a(88),q=a(149),A=31,T=10,D="#222222";function W(e){var t=e.address,a=Object(n.useState)(!1),c=Object(o.a)(a,2),s=c[0],l=c[1],y=Object(n.useState)([]),x=Object(o.a)(y,2),m=x[0],d=x[1],b=Object(n.useState)([]),E=Object(o.a)(b,2),h=E[0],O=E[1],j=p(),g=Object(o.a)(j,2),w=g[0],k=g[1];function S(e,t){return"key_"+e+"_"+t}function _(e){return e/A}return Object(n.useEffect)(function(){function e(){return(e=Object(u.a)(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.a.connect(t),e.prev=1,e.next=4,a.subscribe("asOne/score/all/direct");case 4:f.log("subscribed scoreboardemulator"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),f.error("error connecting to mqtt"),f.error(e.t0);case 11:a.on("message",function(e,t){d(t)});case 12:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}s||(!function(){e.apply(this,arguments)}(),l(!0))},[s,t]),Object(n.useEffect)(function(){if(m){for(var e=[],t=0;t<m.length;t+=3){if((m[t]+m[t+1]+m[t+2])/765>.1){var a=(c=m[t],s=m[t+1],o=m[t+2],"#"+((1<<24)+(c<<16)+(s<<8)+o).toString(16).slice(1));e.push(a)}else e.push(D)}var n=_(k);e.map(function(e,t){var a=q[t].x,c=q[t].y,s=r.a.createElement(R.Rect,{x:n*a,y:n*c,width:n,height:n,fill:e,key:S(a,c)});return h[a][c]=s,e}),O(h)}var c,s,o},[m,h,k]),Object(n.useEffect)(function(){for(var e=_(k),t=[],a=0;a<A;a++){for(var n=[],c=0;c<T;c++){var s=r.a.createElement(R.Rect,{x:e*a,y:e*c,width:e,height:e,fill:D,key:S(a,c)});n.push(s)}t.push(n)}O(t)},[k]),r.a.createElement("div",{ref:w},r.a.createElement(R.Stage,{width:k,height:k/3},r.a.createElement(R.Layer,null,h.flat())))}var z=a(231),F=a.n(z),J=a(150),G=a.n(J),H=a(108),Q=a.n(H),Y="ws://"+window.location.hostname+":8181";var $=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!0),l=Object(o.a)(s,2),i=l[0],u=l[1],y=r.a.createElement(k.a,{style:{height:"40px"}});return r.a.createElement("div",{className:"App"},r.a.createElement(F.a,{fluid:"true"},r.a.createElement(k.a,null,r.a.createElement(_.a,{md:0,lg:1}),r.a.createElement(_.a,{md:12,lg:10},r.a.createElement(G.a,{expand:"lg",variant:"dark",bg:"dark"},r.a.createElement(G.a.Brand,{href:"#"},"As One"),r.a.createElement("div",{className:"d-flex ml-auto flex-nowrap"},r.a.createElement(U,{address:Y,topic:"asOne/fe/heartbeat",emoji:"\ud83d\udd25"}),r.a.createElement("div",{style:{width:"10px"}}),r.a.createElement(U,{address:Y,topic:"asOne/score/heartbeat",emoji:"\ud83d\udcfa"}),r.a.createElement("div",{style:{width:"10px"}}),r.a.createElement(U,{address:Y,topic:"asOne/#",emoji:"\ud83d\udce2"})))),r.a.createElement(_.a,{md:0,lg:1})),y,r.a.createElement(k.a,null,r.a.createElement(_.a,{md:0,lg:1}),r.a.createElement(_.a,null,r.a.createElement("div",{className:"card",style:{backgroundColor:D}},r.a.createElement("h4",{className:"card-header"},r.a.createElement("a",{href:"#/",onClick:function(){return u(!i)}},"Handsets",r.a.createElement("span",{className:"float-right"},"\u25bc"))),r.a.createElement(Q.a,{in:i},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"card-text"},r.a.createElement(P,{address:Y}),y,r.a.createElement(M,null)))))),r.a.createElement(_.a,{md:0,lg:1})),y,r.a.createElement(k.a,null,r.a.createElement(_.a,{md:0,lg:1}),r.a.createElement(_.a,null,r.a.createElement("div",{className:"card",style:{backgroundColor:D}},r.a.createElement("h4",{className:"card-header"},r.a.createElement("a",{href:"#/",onClick:function(){return c(!a)}},"Scoreboard",r.a.createElement("span",{className:"float-right"},"\u25bc"))),r.a.createElement(Q.a,{in:a},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"card-text"},r.a.createElement(W,{address:Y})))))),r.a.createElement(_.a,{md:0,lg:1})),y,r.a.createElement(k.a,null,r.a.createElement(_.a,{md:0,lg:1}),r.a.createElement(_.a,null,r.a.createElement("div",{className:"card",style:{backgroundColor:D}},r.a.createElement("h4",{className:"card-header"},"Fire"),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"card-text"},r.a.createElement(I,{address:Y}))))),r.a.createElement(_.a,{md:0,lg:1})),y))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(501);s.a.render(r.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[232,1,2]]]);
//# sourceMappingURL=main.c57dfa0a.chunk.js.map