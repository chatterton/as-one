(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{146:function(e){e.exports=[{x:30,y:5},{x:29,y:5},{x:28,y:5},{x:27,y:5},{x:27,y:6},{x:27,y:7},{x:27,y:8},{x:28,y:8},{x:29,y:8},{x:30,y:8},{x:30,y:7},{x:30,y:6},{x:30,y:4},{x:30,y:3},{x:30,y:2},{x:29,y:2},{x:28,y:2},{x:27,y:2},{x:27,y:3},{x:27,y:4},{x:25,y:5},{x:24,y:5},{x:23,y:5},{x:22,y:5},{x:22,y:6},{x:22,y:7},{x:22,y:8},{x:23,y:8},{x:24,y:8},{x:25,y:8},{x:25,y:7},{x:25,y:6},{x:25,y:4},{x:25,y:3},{x:25,y:2},{x:24,y:2},{x:23,y:2},{x:22,y:2},{x:22,y:3},{x:22,y:4},{x:20,y:2},{x:20,y:3},{x:20,y:4},{x:20,y:5},{x:20,y:6},{x:20,y:7},{x:20,y:8},{x:17,y:9},{x:16,y:9},{x:15,y:9},{x:14,y:9},{x:13,y:9},{x:13,y:8},{x:14,y:8},{x:15,y:8},{x:16,y:8},{x:17,y:8},{x:17,y:7},{x:16,y:7},{x:15,y:7},{x:14,y:7},{x:13,y:7},{x:18,y:2},{x:17,y:2},{x:16,y:2},{x:16,y:3},{x:16,y:4},{x:17,y:4},{x:18,y:4},{x:18,y:3},{x:18,y:1},{x:18,y:0},{x:17,y:0},{x:16,y:0},{x:16,y:1},{x:14,y:2},{x:13,y:2},{x:12,y:2},{x:12,y:3},{x:12,y:4},{x:13,y:4},{x:14,y:4},{x:14,y:3},{x:14,y:1},{x:14,y:0},{x:13,y:0},{x:12,y:0},{x:12,y:1},{x:10,y:5},{x:9,y:5},{x:8,y:5},{x:7,y:5},{x:7,y:6},{x:7,y:7},{x:7,y:8},{x:8,y:8},{x:9,y:8},{x:10,y:8},{x:10,y:7},{x:10,y:6},{x:10,y:4},{x:10,y:3},{x:10,y:2},{x:9,y:2},{x:8,y:2},{x:7,y:2},{x:7,y:3},{x:7,y:4},{x:5,y:5},{x:4,y:5},{x:3,y:5},{x:2,y:5},{x:2,y:6},{x:2,y:7},{x:2,y:8},{x:3,y:8},{x:4,y:8},{x:5,y:8},{x:5,y:7},{x:5,y:6},{x:5,y:4},{x:5,y:3},{x:5,y:2},{x:4,y:2},{x:3,y:2},{x:2,y:2},{x:2,y:3},{x:2,y:4},{x:0,y:2},{x:0,y:3},{x:0,y:4},{x:0,y:5},{x:0,y:6},{x:0,y:7},{x:0,y:8}]},229:function(e,t,a){e.exports=a(497)},233:function(e,t,a){},349:function(e,t,a){},356:function(e,t){},358:function(e,t){},431:function(e,t){},432:function(e,t){},496:function(e,t,a){},497:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(51),s=a.n(c),o=(a(233),a(18)),i=a(24),l=a.n(i),y=a(38),u=a(71),x=a.n(u),m={error:function(e){console.error(e)},log:function(e){console.log(e)}};function f(e,t){var a=Object(n.useRef)();Object(n.useEffect)(function(){a.current=e},[e]),Object(n.useEffect)(function(){if(null!==t){var e=setInterval(function(){a.current()},t);return function(){return clearInterval(e)}}},[t])}var d=a(73),p=a(23);function v(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(!0),u=Object(o.a)(i,2),v=u[0],h=u[1],b=Object(n.useState)(null),E=Object(o.a)(b,2),g=E[0],O=E[1];function j(e,t){var a=1e3*e;return a+=t/1e6}function w(){return(w=Object(y.a)(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.get(e.url);case 3:a=t.sent,s(a.data),h(!1),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),m.error(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}))).apply(this,arguments)}Object(n.useEffect)(function(){var e={name:"readings",columns:["time","s1","s2","s3","s4"],points:[]};if(c.length>0){var t=c.reverse(),a=!0,n=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var i=s.value,l=[],y=j(i.timestamp.seconds,i.timestamp.nanos);l.push(y),l.push(i.s1),l.push(i.s2),l.push(i.s3),l.push(i.s4),e.points.push(l)}}catch(x){n=!0,r=x}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}var u=new p.TimeSeries(e);O(u)}},[c]),f(function(){!function(){w.apply(this,arguments)}()},250);return r.a.createElement(r.a.Fragment,null,v||null==g?"Loading ...":r.a.createElement(d.ChartContainer,{timeRange:g.timerange(),width:668},r.a.createElement(d.ChartRow,{height:"300",showGrid:!0},r.a.createElement(d.YAxis,{id:"axis1",min:300,max:650,width:28,type:"linear",format:".0f"}),r.a.createElement(d.Charts,null,r.a.createElement(d.LineChart,{axis:"axis1",series:g,columns:["s1","s2","s3","s4"],style:{s1:{stroke:"#a02c2c",opacity:.5},s2:{stroke:"#b03c3c",opacity:.5},s3:{stroke:"#c04c4c",opacity:.5},s4:{stroke:"#d05c5c",opacity:.5}}})))))}var h=a(72),b=a.n(h),E=a(26),g=a.n(E),O="/sensors";function j(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1];function s(){return(s=Object(y.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get(O);case 3:t=e.sent,c(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),m.error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}return f(function(){!function(){s.apply(this,arguments)}()},1e3),a.map(function(e){return r.a.createElement(b.a,{key:e},r.a.createElement(g.a,{md:0,lg:1}),r.a.createElement(g.a,null,r.a.createElement(v,{url:"/sensors/"+e})),r.a.createElement(g.a,{md:0,lg:1}))})}a(349);var w=a(227),k=a.n(w),S=a(104),C=a.n(S);function N(e){var t=e.address,a=e.topic,c=e.emoji,s=Object(n.useState)(!1),i=Object(o.a)(s,2),u=i[0],x=i[1],f=Object(n.useState)(!1),d=Object(o.a)(f,2),p=d[0],v=d[1];return Object(n.useEffect)(function(){function e(){return(e=Object(y.a)(l.a.mark(function e(){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=C.a.connect(t),e.prev=1,e.next=4,n.subscribe(a);case 4:m.log("subscribed mqttindicator "+c+" to topic "+a),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),m.error("error connecting to mqtt"),m.error(e.t0);case 11:n.on("message",function(){x(!0)});case 12:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}p||(!function(){e.apply(this,arguments)}(),v(!0))},[t,p,a,c]),k()(function(){x(!1)},50),r.a.createElement("div",{className:u?"indicator-blink":"indicator"},r.a.createElement("span",{role:"img","aria-label":"MQTT"},c))}var R=a(84),B=a(146),L=31,q=10,A="#222222",I=200;function T(e){var t=e.address,a=Object(n.useState)(!1),c=Object(o.a)(a,2),s=c[0],i=c[1],u=Object(n.useState)([]),x=Object(o.a)(u,2),f=x[0],d=x[1],p=Object(n.useState)([]),v=Object(o.a)(p,2),h=v[0],b=v[1],E=Object(n.useState)(I),g=Object(o.a)(E,2),O=g[0],j=g[1],w=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],r=t[1];return[a,Object(n.useCallback)(function(e){function t(){null!==e&&r(e.getBoundingClientRect())}return window.addEventListener("resize",t),t(),function(){window.removeEventListener("resize",t)}},[])]}(),k=Object(o.a)(w,2),S=k[0],N=k[1];function T(e,t){return"key_"+e+"_"+t}function z(e){return e/L}return Object(n.useEffect)(function(){function e(){return(e=Object(y.a)(l.a.mark(function e(){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=C.a.connect(t),e.prev=1,e.next=4,a.subscribe("asOne/score/all/direct");case 4:m.log("subscribed scoreboardemulator"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),m.error("error connecting to mqtt"),m.error(e.t0);case 11:a.on("message",function(e,t){d(t)});case 12:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}s||(!function(){e.apply(this,arguments)}(),i(!0))},[s,t]),Object(n.useEffect)(function(){if(f){for(var e=[],t=0;t<f.length;t+=3){if((f[t]+f[t+1]+f[t+2])/765>.1){var a=(c=f[t],s=f[t+1],o=f[t+2],"#"+((1<<24)+(c<<16)+(s<<8)+o).toString(16).slice(1));e.push(a)}else e.push(A)}var n=z(O);e.map(function(e,t){var a=B[t].x,c=B[t].y,s=r.a.createElement(R.Rect,{x:n*a,y:n*c,width:n,height:n,fill:e,key:T(a,c)});return h[a][c]=s,e}),b(h)}var c,s,o},[f,h,O]),Object(n.useEffect)(function(){var e=200;S&&(e=S.width),j(e);for(var t=z(e),a=[],n=0;n<L;n++){for(var c=[],s=0;s<q;s++){var o=r.a.createElement(R.Rect,{x:t*n,y:t*s,width:t,height:t,fill:A,key:T(n,s)});c.push(o)}a.push(c)}b(a)},[S]),r.a.createElement("div",{ref:N},r.a.createElement(R.Stage,{width:O,height:O/3},r.a.createElement(R.Layer,null,h.flat())))}var z=a(228),J=a.n(z),W=a(147),_=a.n(W),F=a(145),G=a.n(F),M="ws://"+window.location.hostname+":8181";var Q=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],c=t[1];return r.a.createElement("div",{className:"App"},r.a.createElement(J.a,{fluid:"true"},r.a.createElement(b.a,null,r.a.createElement(g.a,{md:0,lg:1}),r.a.createElement(g.a,{md:12,lg:10},r.a.createElement(_.a,{expand:"lg",variant:"dark",bg:"dark ",style:{marginBottom:"40px"}},r.a.createElement(_.a.Brand,{href:"#"},"As One"),r.a.createElement("div",{className:"d-flex ml-auto flex-nowrap"},r.a.createElement(N,{address:M,topic:"asOne/score/heartbeat",emoji:"\ud83d\udcfa"}),r.a.createElement("div",{style:{width:"10px"}}),r.a.createElement(N,{address:M,topic:"asOne/#",emoji:"\ud83d\udce2"})))),r.a.createElement(g.a,{md:0,lg:1})),r.a.createElement(b.a,null,r.a.createElement(g.a,{md:0,lg:1}),r.a.createElement(g.a,null,r.a.createElement(j,null)),r.a.createElement(g.a,{md:0,lg:1})),r.a.createElement(b.a,null,r.a.createElement(g.a,{md:0,lg:1}),r.a.createElement(g.a,null,r.a.createElement("div",{className:"card",style:{backgroundColor:A}},r.a.createElement("h4",{className:"card-header"},r.a.createElement("a",{href:"#/",onClick:function(){return c(!a)}},"Scoreboard",r.a.createElement("span",{className:"float-right"},"\u25bc"))),r.a.createElement(G.a,{in:a},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"card-text"},r.a.createElement(T,{address:M})))))),r.a.createElement(g.a,{md:0,lg:1}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(496);s.a.render(r.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[229,1,2]]]);
//# sourceMappingURL=main.4dbac82a.chunk.js.map