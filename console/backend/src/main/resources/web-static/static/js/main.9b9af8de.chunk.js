(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{148:function(e){e.exports=[{x:30,y:5},{x:29,y:5},{x:28,y:5},{x:27,y:5},{x:27,y:6},{x:27,y:7},{x:27,y:8},{x:28,y:8},{x:29,y:8},{x:30,y:8},{x:30,y:7},{x:30,y:6},{x:30,y:4},{x:30,y:3},{x:30,y:2},{x:29,y:2},{x:28,y:2},{x:27,y:2},{x:27,y:3},{x:27,y:4},{x:25,y:5},{x:24,y:5},{x:23,y:5},{x:22,y:5},{x:22,y:6},{x:22,y:7},{x:22,y:8},{x:23,y:8},{x:24,y:8},{x:25,y:8},{x:25,y:7},{x:25,y:6},{x:25,y:4},{x:25,y:3},{x:25,y:2},{x:24,y:2},{x:23,y:2},{x:22,y:2},{x:22,y:3},{x:22,y:4},{x:20,y:2},{x:20,y:3},{x:20,y:4},{x:20,y:5},{x:20,y:6},{x:20,y:7},{x:20,y:8},{x:17,y:9},{x:16,y:9},{x:15,y:9},{x:14,y:9},{x:13,y:9},{x:13,y:8},{x:14,y:8},{x:15,y:8},{x:16,y:8},{x:17,y:8},{x:17,y:7},{x:16,y:7},{x:15,y:7},{x:14,y:7},{x:13,y:7},{x:18,y:2},{x:17,y:2},{x:16,y:2},{x:16,y:3},{x:16,y:4},{x:17,y:4},{x:18,y:4},{x:18,y:3},{x:18,y:1},{x:18,y:0},{x:17,y:0},{x:16,y:0},{x:16,y:1},{x:14,y:2},{x:13,y:2},{x:12,y:2},{x:12,y:3},{x:12,y:4},{x:13,y:4},{x:14,y:4},{x:14,y:3},{x:14,y:1},{x:14,y:0},{x:13,y:0},{x:12,y:0},{x:12,y:1},{x:10,y:5},{x:9,y:5},{x:8,y:5},{x:7,y:5},{x:7,y:6},{x:7,y:7},{x:7,y:8},{x:8,y:8},{x:9,y:8},{x:10,y:8},{x:10,y:7},{x:10,y:6},{x:10,y:4},{x:10,y:3},{x:10,y:2},{x:9,y:2},{x:8,y:2},{x:7,y:2},{x:7,y:3},{x:7,y:4},{x:5,y:5},{x:4,y:5},{x:3,y:5},{x:2,y:5},{x:2,y:6},{x:2,y:7},{x:2,y:8},{x:3,y:8},{x:4,y:8},{x:5,y:8},{x:5,y:7},{x:5,y:6},{x:5,y:4},{x:5,y:3},{x:5,y:2},{x:4,y:2},{x:3,y:2},{x:2,y:2},{x:2,y:3},{x:2,y:4},{x:0,y:2},{x:0,y:3},{x:0,y:4},{x:0,y:5},{x:0,y:6},{x:0,y:7},{x:0,y:8}]},230:function(e,t,a){e.exports=a(498)},234:function(e,t,a){},355:function(e,t){},357:function(e,t){},430:function(e,t){},431:function(e,t){},436:function(e,t,a){},497:function(e,t,a){},498:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(51),s=a.n(c),o=(a(234),a(13)),i=a(24),l=a.n(i),u=a(38),y=a(72),x=a(106),m=a.n(x),f={error:function(e){console.error(e)},log:function(e){console.log(e)}};var d=200;function b(){var e=Object(n.useState)(d),t=Object(o.a)(e,2),a=t[0],r=t[1],c=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],r=t[1];return[a,Object(n.useCallback)(function(e){function t(){null!==e&&r(e.getBoundingClientRect())}return window.addEventListener("resize",t),t(),function(){window.removeEventListener("resize",t)}},[])]}(),s=Object(o.a)(c,2),i=s[0],l=s[1];return Object(n.useEffect)(function(){var e=d;i&&(e=i.width),r(e)},[i,a]),[l,a,r]}var p=a(74),h=a(23),v=a(73),E=a.n(v),O=a(228),g=a.n(O);function j(e){var t=e.address,a=e.name,c=Object(n.useState)((new Date).valueOf()),s=Object(o.a)(c,2),i=s[0],x=s[1],m=Object(n.useState)(new g.a(300)),d=Object(o.a)(m,2),v=d[0],O=d[1],j=b(),w=Object(o.a)(j,2),k=w[0],S=w[1],N=Object(n.useState)(!1),C=Object(o.a)(N,2),R=C[0],I=C[1],L=Object(n.useState)(""),q=Object(o.a)(L,2),A=q[0],B=q[1],T=Object(n.useRef)([]).current;Object(y.a)(function(){O(function(e){return T.map(function(t){return e.push(t)}),e}),x((new Date).valueOf()),T.length=0},100),Object(n.useEffect)(function(){function e(){return(e=Object(u.a)(l.a.mark(function e(){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=E.a.connect(t),e.prev=1,e.next=4,n.subscribe("asOne/sensor/reading");case 4:f.log("subscribed sensormonitor"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),f.error("error connecting to mqtt"),f.error(e.t0);case 11:return n.on("message",function(e,t){if(null!=t){var n=t.toString();if(n.startsWith(a)){var r=n.split(","),c=[parseInt(r[5]),r[1],r[2],r[3],r[4]];T.push(c),B(r[6])}}}),e.abrupt("return",function(){n.close&&n.close()});case 13:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}R||(!function(){e.apply(this,arguments)}(),I(!0))},[R,t,T,a,B]);var W=v.toArray(),z=W.length<2?1:W.map(function(e){return parseInt(e[1])+parseInt(e[2])+parseInt(e[3])+parseInt(e[4])}).reduce(function(e,t){return e+t}),D=W.length<2?1:z/W.length/4,J=new h.TimeSeries({name:"readings",columns:["time","s1","s2","s3","s4"],points:W}),_=new h.TimeRange(i-5e3,i);return r.a.createElement("div",{ref:k},null==J?"Loading ...":r.a.createElement(p.ChartContainer,{width:S,timeRange:_,title:A+": "+e.name},r.a.createElement(p.ChartRow,{height:S/3,showGrid:!0},r.a.createElement(p.YAxis,{id:"axis1",min:D-100,max:D+100,width:28,type:"linear",format:".0f"}),r.a.createElement(p.Charts,null,r.a.createElement(p.LineChart,{axis:"axis1",series:J,columns:["s1","s2","s3","s4"],style:{s1:{stroke:"#ff0000",opacity:.75},s2:{stroke:"#bbffbb",opacity:.75},s3:{stroke:"#00bbff",opacity:.75},s4:{stroke:"#bbbbbb",opacity:.75}}})))))}var w=a(63),k=a.n(w),S=a(31),N=a.n(S),C="/sensors";function R(e){var t=e.address,a=Object(n.useState)([]),c=Object(o.a)(a,2),s=c[0],i=c[1];function x(){return(x=Object(u.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get(C);case 3:t=e.sent,i(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),f.error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}return Object(y.a)(function(){!function(){x.apply(this,arguments)}()},1e3),r.a.createElement(k.a,null,Object.keys(s).map(function(e){return r.a.createElement(N.a,{lg:6,md:!0,key:e},r.a.createElement(j,{name:e,address:t}))}))}a(436);function I(e){var t=e.address,a=e.topic,c=e.emoji,s=Object(n.useState)(!1),i=Object(o.a)(s,2),x=i[0],m=i[1],d=Object(n.useState)(!1),b=Object(o.a)(d,2),p=b[0],h=b[1];return Object(n.useEffect)(function(){function e(){return(e=Object(u.a)(l.a.mark(function e(){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=E.a.connect(t),e.prev=1,e.next=4,n.subscribe(a);case 4:f.log("subscribed mqttindicator "+c+" to topic "+a),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),f.error("error connecting to mqtt"),f.error(e.t0);case 11:n.on("message",function(){m(!0)});case 12:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}p||(!function(){e.apply(this,arguments)}(),h(!0))},[t,p,a,c]),Object(y.a)(function(){m(!1)},100),r.a.createElement("div",{className:x?"indicator-blink":"indicator"},r.a.createElement("span",{role:"img","aria-label":"MQTT"},c))}var L=a(86),q=a(148),A=31,B=10,T="#222222";function W(e){var t=e.address,a=Object(n.useState)(!1),c=Object(o.a)(a,2),s=c[0],i=c[1],y=Object(n.useState)([]),x=Object(o.a)(y,2),m=x[0],d=x[1],p=Object(n.useState)([]),h=Object(o.a)(p,2),v=h[0],O=h[1],g=b(),j=Object(o.a)(g,2),w=j[0],k=j[1];function S(e,t){return"key_"+e+"_"+t}function N(e){return e/A}return Object(n.useEffect)(function(){function e(){return(e=Object(u.a)(l.a.mark(function e(){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=E.a.connect(t),e.prev=1,e.next=4,a.subscribe("asOne/score/all/direct");case 4:f.log("subscribed scoreboardemulator"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),f.error("error connecting to mqtt"),f.error(e.t0);case 11:a.on("message",function(e,t){d(t)});case 12:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}s||(!function(){e.apply(this,arguments)}(),i(!0))},[s,t]),Object(n.useEffect)(function(){if(m){for(var e=[],t=0;t<m.length;t+=3){if((m[t]+m[t+1]+m[t+2])/765>.1){var a=(c=m[t],s=m[t+1],o=m[t+2],"#"+((1<<24)+(c<<16)+(s<<8)+o).toString(16).slice(1));e.push(a)}else e.push(T)}var n=N(k);e.map(function(e,t){var a=q[t].x,c=q[t].y,s=r.a.createElement(L.Rect,{x:n*a,y:n*c,width:n,height:n,fill:e,key:S(a,c)});return v[a][c]=s,e}),O(v)}var c,s,o},[m,v,k]),Object(n.useEffect)(function(){for(var e=N(k),t=[],a=0;a<A;a++){for(var n=[],c=0;c<B;c++){var s=r.a.createElement(L.Rect,{x:e*a,y:e*c,width:e,height:e,fill:T,key:S(a,c)});n.push(s)}t.push(n)}O(t)},[k]),r.a.createElement("div",{ref:w},r.a.createElement(L.Stage,{width:k,height:k/3},r.a.createElement(L.Layer,null,v.flat())))}var z=a(229),D=a.n(z),J=a(149),_=a.n(J),G=a(107),M=a.n(G),Q="ws://"+window.location.hostname+":8181";var Y=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!0),i=Object(o.a)(s,2),l=i[0],u=i[1],y=r.a.createElement(k.a,{style:{height:"40px"}});return r.a.createElement("div",{className:"App"},r.a.createElement(D.a,{fluid:"true"},r.a.createElement(k.a,null,r.a.createElement(N.a,{md:0,lg:1}),r.a.createElement(N.a,{md:12,lg:10},r.a.createElement(_.a,{expand:"lg",variant:"dark",bg:"dark"},r.a.createElement(_.a.Brand,{href:"#"},"As One"),r.a.createElement("div",{className:"d-flex ml-auto flex-nowrap"},r.a.createElement(I,{address:Q,topic:"asOne/score/heartbeat",emoji:"\ud83d\udcfa"}),r.a.createElement("div",{style:{width:"10px"}}),r.a.createElement(I,{address:Q,topic:"asOne/#",emoji:"\ud83d\udce2"})))),r.a.createElement(N.a,{md:0,lg:1})),y,r.a.createElement(k.a,null,r.a.createElement(N.a,{md:0,lg:1}),r.a.createElement(N.a,null,r.a.createElement("div",{className:"card",style:{backgroundColor:T}},r.a.createElement("h4",{className:"card-header"},r.a.createElement("a",{href:"#/",onClick:function(){return u(!l)}},"Sensors",r.a.createElement("span",{className:"float-right"},"\u25bc"))),r.a.createElement(M.a,{in:l},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"card-text"},r.a.createElement(R,{address:Q})))))),r.a.createElement(N.a,{md:0,lg:1})),y,r.a.createElement(k.a,null,r.a.createElement(N.a,{md:0,lg:1}),r.a.createElement(N.a,null,r.a.createElement("div",{className:"card",style:{backgroundColor:T}},r.a.createElement("h4",{className:"card-header"},r.a.createElement("a",{href:"#/",onClick:function(){return c(!a)}},"Scoreboard",r.a.createElement("span",{className:"float-right"},"\u25bc"))),r.a.createElement(M.a,{in:a},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"card-text"},r.a.createElement(W,{address:Q})))))),r.a.createElement(N.a,{md:0,lg:1}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(497);s.a.render(r.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[230,1,2]]]);
//# sourceMappingURL=main.9b9af8de.chunk.js.map