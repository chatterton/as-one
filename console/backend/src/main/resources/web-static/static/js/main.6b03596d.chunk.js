(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{149:function(e){e.exports=[{x:30,y:5},{x:29,y:5},{x:28,y:5},{x:27,y:5},{x:27,y:6},{x:27,y:7},{x:27,y:8},{x:28,y:8},{x:29,y:8},{x:30,y:8},{x:30,y:7},{x:30,y:6},{x:30,y:4},{x:30,y:3},{x:30,y:2},{x:29,y:2},{x:28,y:2},{x:27,y:2},{x:27,y:3},{x:27,y:4},{x:25,y:5},{x:24,y:5},{x:23,y:5},{x:22,y:5},{x:22,y:6},{x:22,y:7},{x:22,y:8},{x:23,y:8},{x:24,y:8},{x:25,y:8},{x:25,y:7},{x:25,y:6},{x:25,y:4},{x:25,y:3},{x:25,y:2},{x:24,y:2},{x:23,y:2},{x:22,y:2},{x:22,y:3},{x:22,y:4},{x:20,y:2},{x:20,y:3},{x:20,y:4},{x:20,y:5},{x:20,y:6},{x:20,y:7},{x:20,y:8},{x:17,y:9},{x:16,y:9},{x:15,y:9},{x:14,y:9},{x:13,y:9},{x:13,y:8},{x:14,y:8},{x:15,y:8},{x:16,y:8},{x:17,y:8},{x:17,y:7},{x:16,y:7},{x:15,y:7},{x:14,y:7},{x:13,y:7},{x:18,y:2},{x:17,y:2},{x:16,y:2},{x:16,y:3},{x:16,y:4},{x:17,y:4},{x:18,y:4},{x:18,y:3},{x:18,y:1},{x:18,y:0},{x:17,y:0},{x:16,y:0},{x:16,y:1},{x:14,y:2},{x:13,y:2},{x:12,y:2},{x:12,y:3},{x:12,y:4},{x:13,y:4},{x:14,y:4},{x:14,y:3},{x:14,y:1},{x:14,y:0},{x:13,y:0},{x:12,y:0},{x:12,y:1},{x:10,y:5},{x:9,y:5},{x:8,y:5},{x:7,y:5},{x:7,y:6},{x:7,y:7},{x:7,y:8},{x:8,y:8},{x:9,y:8},{x:10,y:8},{x:10,y:7},{x:10,y:6},{x:10,y:4},{x:10,y:3},{x:10,y:2},{x:9,y:2},{x:8,y:2},{x:7,y:2},{x:7,y:3},{x:7,y:4},{x:5,y:5},{x:4,y:5},{x:3,y:5},{x:2,y:5},{x:2,y:6},{x:2,y:7},{x:2,y:8},{x:3,y:8},{x:4,y:8},{x:5,y:8},{x:5,y:7},{x:5,y:6},{x:5,y:4},{x:5,y:3},{x:5,y:2},{x:4,y:2},{x:3,y:2},{x:2,y:2},{x:2,y:3},{x:2,y:4},{x:0,y:2},{x:0,y:3},{x:0,y:4},{x:0,y:5},{x:0,y:6},{x:0,y:7},{x:0,y:8}]},232:function(e,t,a){e.exports=a(502)},236:function(e,t,a){},358:function(e,t){},360:function(e,t){},433:function(e,t){},434:function(e,t){},439:function(e,t,a){},501:function(e,t,a){},502:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(53),l=a.n(c),s=(a(236),a(10)),o=(a(237),a(15)),i=a.n(o),u=a(26),x=a(75),y=a(54),m=a.n(y),f={error:function(e){console.error(e)},log:function(e){console.log(e)}};var d=200;function p(){var e=Object(n.useState)(d),t=Object(s.a)(e,2),a=t[0],r=t[1],c=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],r=t[1];return[a,Object(n.useCallback)(function(e){function t(){null!==e&&r(e.getBoundingClientRect())}return window.addEventListener("resize",t),t(),function(){window.removeEventListener("resize",t)}},[])]}(),l=Object(s.a)(c,2),o=l[0],i=l[1];return Object(n.useEffect)(function(){var e=d;o&&(e=o.width),r(e)},[o,a]),[i,a,r]}var b=a(76),E=a(25),h=a(55),v=a.n(h),O=a(230),g=a.n(O),j=125;function w(e){var t=e.address,a=e.name,c=Object(n.useState)((new Date).valueOf()),l=Object(s.a)(c,2),o=l[0],y=l[1],m=Object(n.useState)(new g.a(300)),d=Object(s.a)(m,2),h=d[0],O=d[1],w=p(),k=Object(s.a)(w,2),S=k[0],C=k[1],_=Object(n.useState)(!1),N=Object(s.a)(_,2),B=N[0],L=N[1],M=Object(n.useState)(""),P=Object(s.a)(M,2),I=P[0],R=P[1],q=Object(n.useRef)([]).current;Object(x.a)(function(){O(function(e){return q.map(function(t){return e.push(t)}),e}),y((new Date).valueOf()),q.length=0},100),Object(n.useEffect)(function(){function e(){return(e=Object(u.a)(i.a.mark(function e(){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.a.connect(t),e.prev=1,e.next=4,n.subscribe("asOne/sensor/reading");case 4:f.log("subscribed sensormonitor"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),f.error("error connecting to mqtt"),f.error(e.t0);case 11:return n.on("message",function(e,t){if(null!=t){var n=t.toString();if(n.startsWith(a)){var r=n.split(","),c=[parseInt(r[5]),r[1],r[2],r[3],r[4]];q.push(c),R(r[6])}}}),e.abrupt("return",function(){n.close&&n.close()});case 13:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}B||(!function(){e.apply(this,arguments)}(),L(!0))},[B,t,q,a,R]);var A=h.toArray(),T=A.length<2?1:A.map(function(e){return parseInt(e[1])+parseInt(e[2])+parseInt(e[3])+parseInt(e[4])}).reduce(function(e,t){return e+t}),U=A.length<2?1:T/A.length/4,W=new E.TimeSeries({name:"readings",columns:["time","s1","s2","s3","s4"],points:A}),z=new E.TimeRange(o-5e3,o);return r.a.createElement("div",{ref:S},null==W?"Loading ...":r.a.createElement(b.ChartContainer,{width:C,timeRange:z,title:I+": "+e.name},r.a.createElement(b.ChartRow,{height:C/3,showGrid:!0},r.a.createElement(b.YAxis,{id:"axis1",min:U-j,max:U+j,width:28,type:"linear",format:".0f"}),r.a.createElement(b.Charts,null,r.a.createElement(b.LineChart,{axis:"axis1",series:W,columns:["s1","s2","s3","s4"],style:{s1:{stroke:"#ff0000",opacity:.75},s2:{stroke:"#bbffbb",opacity:.75},s3:{stroke:"#00bbff",opacity:.75},s4:{stroke:"#bbbbbb",opacity:.75}}})))))}var k=a(37),S=a.n(k),C=a(14),_=a.n(C),N="/sensors";function B(e){var t=e.address,a=Object(n.useState)([]),c=Object(s.a)(a,2),l=c[0],o=c[1];function y(){return(y=Object(u.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get(N);case 3:t=e.sent,o(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),f.error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}return Object(x.a)(function(){!function(){y.apply(this,arguments)}()},1e3),r.a.createElement(S.a,null,Object.keys(l).map(function(e){return r.a.createElement(_.a,{lg:6,md:!0,key:e},r.a.createElement(w,{name:e,address:t}))}))}a(439);function L(e){var t=e.address,a=e.topic,c=e.emoji,l=Object(n.useState)(!1),o=Object(s.a)(l,2),y=o[0],m=o[1],d=Object(n.useState)(!1),p=Object(s.a)(d,2),b=p[0],E=p[1];return Object(n.useEffect)(function(){function e(){return(e=Object(u.a)(i.a.mark(function e(){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.a.connect(t),e.prev=1,e.next=4,n.subscribe(a);case 4:f.log("subscribed mqttindicator "+c+" to topic "+a),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),f.error("error connecting to mqtt"),f.error(e.t0);case 11:n.on("message",function(){m(!0)});case 12:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}b||(!function(){e.apply(this,arguments)}(),E(!0))},[t,b,a,c]),Object(x.a)(function(){m(!1)},100),r.a.createElement("div",{className:y?"indicator-blink":"indicator"},r.a.createElement("span",{role:"img","aria-label":"MQTT"},c))}var M=a(46),P=a.n(M),I="/game/reset";function R(){function e(){return(e=Object(u.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post(I);case 3:t=e.sent,f.log("reset effect: "+t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),f.error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}return r.a.createElement(P.a,{label:"reset",id:"reset-button",onClick:function(){!function(){e.apply(this,arguments)}()}},"reset")}function q(e){var t=e.address,a=Object(n.useState)(!1),c=Object(s.a)(a,2),l=c[0],o=c[1],x=Object(n.useState)(null),y=Object(s.a)(x,2),m=y[0],d=y[1],p=Object(n.useState)("169"),b=Object(s.a)(p,2),E=b[0],h=b[1];function O(e,t){var a=m;a&&a.publish&&a.publish(e,t)}return Object(n.useEffect)(function(){function e(){return(e=Object(u.a)(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.a.connect(t),e.prev=1,e.next=4,a.subscribe("asOne/console/leftBPM");case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),f.error("error connecting to mqtt"),f.error(e.t0);case 10:a.on("message",function(e,t){if(null!=t){var a=t.toString();a&&h(a)}}),d(a);case 12:case"end":return e.stop()}},e,null,[[1,6]])}))).apply(this,arguments)}l||(!function(){e.apply(this,arguments)}(),o(!0))},[t,m,l,h]),r.a.createElement(S.a,null,r.a.createElement(_.a,null,r.a.createElement(P.a,{label:"Upper",id:"upper-button",onClick:function(){O("asOne/fe/testUpper","500")}},"Upper ______")),r.a.createElement(_.a,null,r.a.createElement(P.a,{label:"Lower",id:"lower-button",onClick:function(){O("asOne/fe/testLower","375")}},"Lower ______")),r.a.createElement(_.a,null,r.a.createElement(P.a,{label:"80 BPM",id:"80-bpm-button",onClick:function(){O("asOne/fe/doBPM","80")}},"80 BPM ______")),r.a.createElement(_.a,null,r.a.createElement(P.a,{label:"Left BPM",id:"left-bpm-button",onClick:function(){O("asOne/fe/doBPM",E)}},"Left BPM (",E,")")),r.a.createElement(_.a,null,r.a.createElement(R,null)),r.a.createElement(_.a,null))}a(88),a(149);var A="#222222";var T="/game/fire";function U(){function e(){return(e=Object(u.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post(T);case 3:t=e.sent,f.log("fired effect: "+t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),f.error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}return r.a.createElement(P.a,{label:"fire",style:{width:"200px"},id:"fire-button",onClick:function(){!function(){e.apply(this,arguments)}()}},"\xa0\xa0\xa0\xa0\xa0f\xa0i\xa0r\xa0e\xa0\xa0\xa0\xa0\xa0")}var W=a(231),z=a.n(W),D=a(150),J=a.n(D),F=a(108),G=a.n(F),H="ws://"+window.location.hostname+":8181";var Q=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!0),o=Object(s.a)(l,2),i=o[0],u=o[1],x=r.a.createElement(S.a,{style:{height:"40px"}});return r.a.createElement("div",{className:"App"},r.a.createElement(z.a,{fluid:"true"},r.a.createElement(S.a,null,r.a.createElement(_.a,{md:0,lg:1}),r.a.createElement(_.a,{md:12,lg:10},r.a.createElement(J.a,{expand:"lg",variant:"dark",bg:"dark"},r.a.createElement(J.a.Brand,{href:"#"},"As One"),r.a.createElement("div",{className:"d-flex ml-auto flex-nowrap"},r.a.createElement(L,{address:H,topic:"asOne/fe/heartbeat",emoji:"\ud83d\udd25"}),r.a.createElement("div",{style:{width:"10px"}}),r.a.createElement(L,{address:H,topic:"asOne/score/heartbeat",emoji:"\ud83d\udcfa"}),r.a.createElement("div",{style:{width:"10px"}}),r.a.createElement(L,{address:H,topic:"asOne/console/heartbeat",emoji:"\ud83d\udce2"})))),r.a.createElement(_.a,{md:0,lg:1})),x,r.a.createElement(S.a,null,r.a.createElement(_.a,{md:0,lg:1}),r.a.createElement(_.a,{md:12,lg:10},r.a.createElement(U,null)),r.a.createElement(_.a,{md:0,lg:1})),x,r.a.createElement(S.a,null,r.a.createElement(_.a,{md:0,lg:1}),r.a.createElement(_.a,null,r.a.createElement("div",{className:"card",style:{backgroundColor:A}},r.a.createElement("h4",{className:"card-header"},r.a.createElement("a",{href:"#/",onClick:function(){return u(!i)}},"Handsets",r.a.createElement("span",{className:"float-right"},"\u25bc"))),r.a.createElement(G.a,{in:i},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"card-text"},r.a.createElement(B,{address:H})))))),r.a.createElement(_.a,{md:0,lg:1})),x,r.a.createElement(S.a,null,r.a.createElement(_.a,{md:0,lg:1}),r.a.createElement(_.a,null,r.a.createElement("div",{className:"card",style:{backgroundColor:A}},r.a.createElement("h4",{className:"card-header"},r.a.createElement("a",{href:"#/",onClick:function(){return c(!a)}},"Scoreboard",r.a.createElement("span",{className:"float-right"},"\u25bc"))),r.a.createElement(G.a,{in:a},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"card-text"},"Scoreboard currently commented out for mobile performance ",r.a.createElement("span",{role:"img","aria-label":"oh noes!"},"\ud83d\ude2e")))))),r.a.createElement(_.a,{md:0,lg:1})),x,r.a.createElement(S.a,null,r.a.createElement(_.a,{md:0,lg:1}),r.a.createElement(_.a,null,r.a.createElement("div",{className:"card",style:{backgroundColor:A}},r.a.createElement("h4",{className:"card-header"},"Fire"),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"card-text"},r.a.createElement(q,{address:H}))))),r.a.createElement(_.a,{md:0,lg:1})),x))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(501);l.a.render(r.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[232,1,2]]]);
//# sourceMappingURL=main.6b03596d.chunk.js.map